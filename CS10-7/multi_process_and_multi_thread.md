# 프로그램과 프로세스
## 프로그램  
- 어떤 작업을 위해 운영체제 위에서 실행할 수 있는 파일
- 하드디스크 같은 저장장치에 보관되어 있다가 마우스로 더블클릭하면 실행된다.

## 프로세스
- 운영 체제 위에서 **실행 중**인 프로그램
- 컴퓨터 시스템의 작업 단위로 테스크(task)라고도 부른다.
- 프로그램 명령어와 데이터들이 메모리에 올라오고 실행 중 또는 실행 대기 중인 상태
- 폰노이만 구조에서 프로그램이 실행된다는 것은 해당 코드가 메모리에 올라와서 작업이 진행된다는 의미이다.

👉 프로그램은 저장장치에 저장되있는 정적 상태, 프로세스는 실행을 위해 메모리에 올라온 동적인 상태이다.  
<br>

## 일괄 처리 방식
일괄 처리 방식은 프로세스 A, B, C가 있으면 A가 시작하고 끝날 때 B를 시작, B가 끝나면 C가 시작하는 식의 처리 방식이였다. 그러나 보다시피 이런 처리 방식은 실행해야 할 프로세스들이 남아있지만 A가 끝날 때까지 CPU가 놀고 있게 되어 매우 효율적이지 못하다.

## 시분할 방식
앞의 일괄 처리 방식의 효율성을 높이기 위해 시분할 방식이 나오게 되었다.  
시분할 방식은 하나의 CPU가 프로세스 A, B, C를 일정한 시간 돌아가면서 하나씩 진행하는 것이다.  
A - (1초 뒤) -> B - (1초 뒤) -> C -(1초 뒤) -> A  
<br>

## 프로세스 제어 블록(PCB - Process Control Block)
프로그램을 실행하면 메모리의 적당한 위치로 가져온다.  
그와 동시에 작업 지시서인 PCB를 만든다.  
어떤 프로그램이 프로세스가 되었다는 것은 운영체제로부터 고유한 PCB를 받았다는 뜻이다.  
PCB는 프로세스 생성 시 만들어져 프로세스가 종료되면 폐기된다.  
PCB는 다음과 같이 구성된다.
### 포인터
- 프로세스의 현재 위치를 저장한다.
### 프로세스 상태
- 생성(New), 준비(Ready), 실행(Running), 대기(Waiting), 종료(Terminated), 보류 준비, 보류 대기 등의 프로세스 상태를 저장한다.
### 프로세스 구분자(PID - Process IDentification)
- 프로세스들마다 가지는 고유의 일련번호로 프로세스들을 구분하기 위해 사용된다.
### 프로그램 카운터
- 다음에 실행될 명령어의 위치를 저장한다.
### 프로세스 우선 순위
- 프로세스의 중요도는 각각 다르다. 사용자 프로세스보다 중요도가 큰 커널 프로세스는 우선 순위가 높고, 사용자 프로세스끼리도 우선 순위가 다르다.
- 다양한 우선 순위의 프로세스가 대기 상태로 들어오기 때문에 대기 상태의 큐도 우선 순위별로 따로 운영된다.
- CPU 스케줄러가 준비 상태의 프로세스를 실행 상태로 올길 때 프로세스의 우선 순위를 기준으로 삼는다. 따라서 높은 우선 순위의 프로세스는 먼저, 더 자주 실행된다.
### 각종 레지스터 정보
- PCB에는 프로세스가 실행되는 중에 사용하던 레지스터, 누산기, 색인 레지스터, 스택 포인터와 같은 레지스터의 값이 저장된다.
### 메모리 관리 정보
- 프로세스의 메모리 위치
- 메모리 보호를 위한 경계 레지스터와 한계 레지스터
### 할당된 자원 정보
- 프로세스를 실행하기 위해 사용하은 입출력 자원이나 오픈 파일 등에 대한 정보를 저장한다.
### 계정 정보
- 계정 정보, CPU 할당 시간, CPU 사용 시간 등을 저장한다.
### 부모 프로세스 구분자와 자식 프로세스 구분자
- 부모 프로세스를 가리키는 PPID와 자식 프로세스를 가리키는 CPID를 저장한다.
  
<br>
<br>
운영체제는 빠르게 PCB에 접근하기 위해 프로세스 테이블을 사용하여 각 프로세스의 PCB를 관리한다.  
<br>
<br>
<img width="600" src="https://user-images.githubusercontent.com/17706346/152643516-b8d7b600-7543-4fce-99b6-25f0534cf12c.png">
<br>
<br>

# 프로세서  
- 프로세스가 동작될 수 있도록 하는 하드웨어(**CPU**)  
- 프로그램의 자원들이 메모리에 올라오고, 실행되어야 할 코드의 메모리 주소를 CPU의 레지스터로 올려준다.  
<br>
<br>

# 코어  
코어란 각종 연산을 하는 CPU의 핵심요소이며, CPU 내부에는 코어 말고도 컨트롤러, 캐시 메모리 등이 들어있다.  
CPU 안에서 일하는 부품 중 가장 중요한 역할이다.  
코어가 많을수록 일을 처리하는 사람이 많아지는 것이기 때문에 많으면 많을수록 처리속도가 빨라진다.  
<br>
<br>

# 스레드
프로세스는 운영체제로부터 자원을 할당받는 작업의 단위이고,  
스레드는 프로세스가 할당받은 자원을 이용하는 실행의 단위이다.  
<br>
<br>

# 🧐 멀티 태스킹이란?
CPU는 **한순간에 하나의 프로세스**만 실행할 수 있다.  
그러나 운영체제가 짧은 시간에 수십번에서 수천번 실행할 프로세스를 **교체**하고 있기 때문에  
우리는 동시에 여려 개의 작업이 실행되고 있다고 느끼는 것이다.  
이런 교체 과정을 컨텍스트 스위칭이라고 한다.
<br>
<br>

# Context Switching
![context_switching](https://user-images.githubusercontent.com/17706346/150735655-d8b06438-832c-487a-8c20-f472a4b07eb4.png)  
Task 1에서 Task 2로, Task 2에서 Task 1로 교체되는 시점마다  
어떤 작업으로 교체해야하는지, 이전 작업이 어디까지 진행됐는지 교체할 작업을 어디부터 시작하면 되는지에 대한  
작업이 이뤄지는 순간을 컨텍스트 스위칭이라고 한다.  
다양한 방식과 알고리즘이 쓰인다.
<br>
<br>

# 🧐 멀티 프로세스란?
## 프로세스 구조
![process_structure](https://user-images.githubusercontent.com/17706346/150738037-44e2625d-c1e9-450e-98ea-0c8a1e567362.png)  
Stack - 호출된 함수, 지역변수 등 임시 데이터  
Heap - 동적으로 생긴 데이터 ex) new Object(), malloc()  
Data - 전역변수 ex) static 변수, global 변수  
Code - 프로그램의 코드  
<br>
// TODO
<br>
<br>

# 🧐 멀티 스레드란?
// TODO
<br>
<br>